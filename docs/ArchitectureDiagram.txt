@startuml Bakery
skinparam classAttributeIconSize 0

Customer --> OrderProcessor : OrderMessage
OrderProcessor --> Customer : Status
OrderProcessor --> Order : Creates

== Start of Day ==
Scheduler --> OrderProcessor : PendingOrders
OrderProcessor --> Scheduler : TodaysOrder
Scheduler --> Order : RequestProductInfo
Order --> Scheduler : OrderInfo
Scheduler --> StreetNetwork : GetTimeToDelivery
StreetNetwork --> Scheduler : TimeToDelivery

== Dough Preparation ==
Scheduler --> KneadingAgent : FreeToKnead?
KneadingAgent --> Scheduler : readyToKnead
Scheduler --> KneadingAgent : ProductToKnead

KneadingAgent --> ItemPrepAgent : FreeToPrepare?
ItemPrepAgent --> KneadingAgent : readyToPrep
KneadingAgent --> ItemPrepAgent : ProductsToPrep

ItemPrepAgent --> ProofingAgent : ProofProducts

== Baking ==
ProofingAgent --> BakingScheduler : ProductsReadyToBake

BakingScheduler --> BakingAgent : FreeToBake?
BakingAgent --> BakingScheduler : NumberOfFreeTrays
BakingScheduler --> BakingAgent : ProductsToBake

BakingAgent --> CoolingRacks : CoolProducts


== Packaging ==
CoolingRacks --> PackingScheduler : ProductsReadyToPack

PackingScheduler --> DecoratorAgent : FreeToDecorate?
DecoratorAgent --> PackingScheduler : readyToDecorate
PackingScheduler --> DecoratorAgent : ProductsToDecorate

DecoratorAgent --> PackingAgent : FreeToPack?
PackingAgent --> DecoratorAgent : readyToPack
DecoratorAgent --> PackingAgent : PackProducts

PackingAgent --> LoadingBay : BoxesToDeliver

== Delivery ==
LoadingBay --> OrderTracker : BoxesReadyToDeliver

OrderTracker --> Order : OrderProgress
Order --> OrderTracker : OrderFulfilled
OrderTracker --> TransportAgent : RequestOrderTransport
TransportAgent --> Streetnetwork : queryTimeToDelivery
Streetnetwork ---> TransportAgent : TimeToDelivery
TransportAgent --> Truck : DeliverOrders
Truck --> Mailbox : OrderSuccessfullyDelivered


@enduml
